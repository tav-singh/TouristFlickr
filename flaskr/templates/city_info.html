<link rel="stylesheet"  href="../static/css/lightslider.css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="../static/js/lightslider.js"></script>


<div id="close-city">x</div>
<div style="margin-top: 10px;">
        
            <div style="margin-left: 50px;">
            
            <p style="font-size: 1.5em; margin:0;">{{data.city}}</p>
            <p style="font-size: 1em; margin:0;">{{data.country}}</p>

            </div>
</div>
<div id="my_dataviz" style="width: 500px;height:300px;" ></div>

<div style=" height: 400px; overflow: scroll;">
    <section id="photos"></section>
</div>


<meta id="city" data-data="{{data}}" data-raw="{{raw}}">
<script>

    $(() => {
        let cityData = $('#city').data().raw
        console.log("city info", cityData)
    })

    $("#close-city").click(() => {
        console.log("close")
        d3.select("#one-city-views").style("display", "none")
        cityOpened = false

    })
</script>
<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-gl/dist/echarts-gl.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-stat/dist/ecStat.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/extension/dataTool.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/map/js/china.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/map/js/world.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/extension/bmap.min.js"></script>
<!-- Create a div where the graph will take place -->

<script type="text/javascript">



    // EXAMPLE OF SINGLE GUAGE
    var myChart = echarts.init(document.getElementById('my_dataviz'));

  
    var option = {
        tooltip: {
            formatter: '{a} <br/>{b} : {c}%'
        },
        toolbox: {
            feature: {
            }
        },
        series: [
            {
                name: 'Coefficient',
                type: 'gauge',
                detail: {formatter: '{value}%'},
                axisLine: {            // 坐标轴线
                         lineStyle: {       // 属性lineStyle控制线条样式
                             color: [[0.2, 'red'], [0.8, 'blue'], [1, 'green']]
                                    }
                                },
                data: [{value: 71, name: 'Safety Coefficient'}]
            }
        ]
    };

      myChart.setOption(option);

    var data=JSON.parse('{{data|tojson|safe}}');
    var allImages = "";
     
    for (var i = 0; i < Object.keys(data.description).length; i++) {
     
      allImages += "<img src=' "+data.description[i].cdn_url+" '/>";
    }

    $('#photos').append(allImages);
</script>
