<link rel="stylesheet"  href="../static/css/lightslider.css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="../static/js/lightslider.js"></script>

<style>
    ul{
        list-style: none outside none;
        padding-left: 0;
        margin: 0;
    }
    .imgrid .item{
        margin-bottom: 0;
    }
    .imgrid{
        width: 90%;
        margin-left: 50px;
        /* margin-top: 0px; */
    }
</style>

<script>
    $(document).ready(function() {
       $("#content-slider").lightSlider({
           loop:true,
           keyPress:true
       });
       $('#image-gallery').lightSlider({
           gallery:true,
           item:1,
           thumbItem:9,
           slideMargin: 0,
           speed:500,
           auto:true,
           loop:true,
           onSliderLoad: function() {
               $('#image-gallery').removeClass('cS-hidden');
           }
       });
   });
</script>

<div id="loading-overlay" class="loading-overlay">
</div>
<div id="close-city">x</div>
<div class="city-info-header flex">
    <p style="margin:0">
        <span style="font-size: 1.5em; margin:0;">{{data.city}}, </span>
        <span style="font-size: 1.5em; margin:0;">{{data.country}}</span>
    </p>
</div>
<div style="margin-top: 10px;">
    <div class="imgrid">
        <div class="item">
            <div class="clearfix" style="width: 500px;">
                <ul id="image-gallery" class="gallery list-unstyled cS-hidden">
                </ul>
            </div>
        </div>
    </div>
</div>
        
<div style="margin-left: 50px;">

</div>
</div>
<div id="my_dataviz" style="width: 700px;height:500px;" ></div>

<!--<div style=" height: 400px; overflow: scroll;">-->
<!--    <section id="photos"></section>-->
<!--</div>-->


<meta id="city" data-data="{{data}}" data-raw="{{raw}}">
<script>

    $(() => {
        let cityData = $('#city').data().raw
        console.log("city info", cityData)
        console.log("header image", "url(" +data.description[0].cdn_url+ ")")
        // $(".city-info-header").css("background-image", "url(" +data.description[0].cdn_url+ ")")
    })

    $("#close-city").click(() => {
        console.log("close")
        $(".overlay").css("width", "0")
        svg
            .attr("width", "100%")
            initiateZoom();
        cityOpened = false

    })
</script>
<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-gl/dist/echarts-gl.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-stat/dist/ecStat.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/extension/dataTool.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/map/js/china.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/map/js/world.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/extension/bmap.min.js"></script>
<!-- Create a div where the graph will take place -->

<script type="text/javascript">

    // EXAMPLE OF SINGLE GUAGE
    var myChart = echarts.init(document.getElementById('my_dataviz'));

  
    var option = {
        tooltip: {
            formatter: '{a} <br/>{b} : {c}%'
        },
        toolbox: {
            feature: {
            }
        },
        series: [
            {
                name: 'Coefficient',
                type: 'gauge',
                detail: {formatter: '{value}%'},
                axisLine: {            // 坐标轴线
                         lineStyle: {       // 属性lineStyle控制线条样式
                             color: [[0.2, '#c23531'], [0.8, '#63869e'], [1, '#91c7ae']]
                                    }
                                },
                data: [{value: 71, name: 'Safety Coefficient'}]
            }
        ]
    };

      myChart.setOption(option);

    var data=JSON.parse('{{data|tojson|safe}}');
    var allImages = "";
     
    for (var i = 0; i < Object.keys(data.description).length; i++) {
        var cdn_url = data.description[i].cdn_url
        allImages += "<li data-thumb=" + cdn_url+"><div style='background-image: url("+ cdn_url + ")' ></div></li>";
    }

    document.getElementById('image-gallery').innerHTML = allImages;
</script>
